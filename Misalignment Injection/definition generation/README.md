# Misalignment Injection: Definition Generation

This directory constructs training data for **misaligned descriptions**, simulating semantic gaps between ontology axioms and their corresponding natural language definitions. This is a key component of the misalignment injection pipeline proposed in our paper.

## 📁 Directory Structure

```
├── Axiom_per_entity/         # Axioms grouped by ontology term
├── Batchinput/               # GPT input prompts (batched)
├── Batchoutput/              # Raw GPT completions (responses)
├── Ontology/                 # Source ontology files (.owl)
├── Ontology_description/     # Extracted existing descriptions from ontologies
├── generated description/    # Final, post-processed descriptions generated by GPT
├── C_example.txt             # Example description for classes
├── P_example.txt             # Example description for properties
├── description_extraction.py     # Extracts existing rdfs:comment/description annotations
├── description_generation.py     # Uses GPT API to generate new definitions using axiom context
├── description_postprocessing.py # Cleans GPT output and saves to usable format
```

---

## 🔄 Workflow

### 1. Extract Descriptions

- **File**: `description_extraction.py`  
- **Purpose**: Parses ontology files in the `Ontology/` folder and extracts existing natural language descriptions (e.g., `rdfs:comment`) for each class and property.
- **Output**: Saved in `Ontology_description/`.

### 2. Generate Descriptions via GPT

- **File**: `description_generation.py`  
- **Purpose**: For each ontology term (class/property), uses its logical axioms and examples (`C_example.txt`, `P_example.txt`) to create GPT prompts and request generated descriptions.
- **Output**: Stored in `Batchoutput/`.

### 3. Post-process GPT Outputs

- **File**: `description_postprocessing.py`  
- **Purpose**: Converts raw GPT outputs into structured, cleaned definitions.
- **Output**: Saved in `generated description/`, ready for downstream training or evaluation.

---

